<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="inventorysystem.controllers.DashboardMainController"
            style="-fx-background-color: #f4f6f7;"
            prefWidth="1100" prefHeight="650">

    <!-- TOP: Title + Quick Actions -->
    <top>
        <VBox spacing="10">
            <padding>
                <Insets top="20" right="20" bottom="10" left="20"/>
            </padding>

            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Dashboard"
                       style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                <Label text="ðŸ“Š Inventory overview"
                       style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
            </HBox>
            
            <HBox alignment="CENTER_RIGHT" spacing="20">
    
                <StackPane fx:id="notifBell"
                           style="-fx-cursor: hand; -fx-padding: 4;"
                           alignment="CENTER">

                    <!-- Bell Icon -->
                    <Label text="ðŸ””"
                           style="-fx-font-size: 26px;" />

                    <!-- Notification Badge -->
                    <Label fx:id="notifCount"
                           text="0"
                           visible="false"
                           style="
                -fx-background-color: #e63946;
                -fx-text-fill: white;
                -fx-font-size: 11px;
                -fx-font-weight: bold;
                -fx-background-radius: 12;
                -fx-padding: 2 6;
           "
                           StackPane.alignment="TOP_RIGHT"
                           translateX="-4" translateY="4"/>
                </StackPane>


            </HBox>


           
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Quick Actions:"
                       style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;"/>

                <HBox spacing="8">
                    <Button fx:id="btnAddItem" text="âž• Add Item"
                            style="-fx-background-radius: 4; -fx-background-color: #3498db;
                       -fx-text-fill: white; -fx-padding: 6 18; -fx-font-weight: bold;"/>

                    <Button fx:id="btnAddBorrower" text="âž• Add Borrower"
                            style="-fx-background-radius: 4; -fx-background-color: #2ecc71;
                       -fx-text-fill: white; -fx-padding: 6 18; -fx-font-weight: bold;"/>

                    <Button fx:id="btnAddCategory" text="âž• Add Category"
                            style="-fx-background-radius: 4; -fx-background-color: #9b59b6;
                       -fx-text-fill: white; -fx-padding: 6 18; -fx-font-weight: bold;"/>
                </HBox>
            </HBox>
        </VBox>
    </top>

    <!-- CENTER: KPI Cards + Charts -->
    <center>
        <VBox spacing="25">
            <padding>
                <Insets top="10" right="20" bottom="20" left="20"/>
            </padding>

            <!-- ROW 1: Items related (bigger cards) -->
            <HBox fx:id="row1" spacing="18">
                <children>

                    <VBox fx:id="cardTotalItems" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="ðŸ“¦ Total Items" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblTotalItems" text="0"
                               style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="All items in inventory" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                    <VBox fx:id="cardAvailableItems" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="ðŸ“— Available Items" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblAvailableItems" text="0"
                               style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #27ae60;"/>
                        <Label text="Ready to be borrowed" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                    <VBox fx:id="cardBorrowedItems" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="ðŸ“• Borrowed Items" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblBorrowedItems" text="0"
                               style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #e67e22;"/>
                        <Label text="Currently out" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                    <VBox fx:id="cardDamagedItems" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="âš ï¸ Damaged Items" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblDamagedItems" text="0"
                               style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #c0392b;"/>
                        <Label text="Needs attention" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                </children>
            </HBox>

            <!-- ROW 2: Borrowers & Records -->
            <HBox fx:id="row2" spacing="18">
                <children>

                    <VBox fx:id="cardBorrowers" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="ðŸ§ Borrowers" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblTotalBorrowers" text="0"
                               style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="Registered borrowers" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                    <VBox fx:id="cardTotalRecords" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="ðŸ“„ Borrow Records" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblTotalRecords" text="0"
                               style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="All borrow history" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                    <VBox fx:id="cardActiveRecords" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="â³ Active Borrows" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblActiveBorrows" text="0"
                               style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #e67e22;"/>
                        <Label text="Still not returned" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                    <VBox fx:id="cardTodayStats" spacing="8" HBox.hgrow="ALWAYS"
                          prefWidth="240" minHeight="120"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 12, 0, 0, 4);">
                        <Label text="ðŸ“… Today" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
                        <Label fx:id="lblTodaySummary" text="0 / 0"
                               style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="Borrowed / Returned" style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                    </VBox>

                </children>
            </HBox>

            <!-- ROW 3: Charts -->
            <VBox spacing="10">
                <Label text="Visual Overview"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                <HBox spacing="18">
                    <VBox spacing="6" HBox.hgrow="ALWAYS"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 3);">
                        <Label text="ðŸ“¦ Item Status Distribution"
                               style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;"/>
                        <PieChart fx:id="statusPieChart" prefHeight="220"/>
                    </VBox>

                    <VBox spacing="6" HBox.hgrow="ALWAYS"
                          style="-fx-background-color: white; -fx-background-radius: 14; -fx-padding: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 10, 0, 0, 3);">
                        <Label text="ðŸ“… Today Activity"
                               style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;"/>
                        <BarChart fx:id="todayBarChart"
                                  prefHeight="220"
                                  legendVisible="false">
                            <xAxis>
                                <CategoryAxis fx:id="todayCategoryAxis"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="todayNumberAxis" forceZeroInRange="true"/>
                            </yAxis>
                        </BarChart>
                    </VBox>
                </HBox>
            </VBox>

        </VBox>
    </center>

</BorderPane>
